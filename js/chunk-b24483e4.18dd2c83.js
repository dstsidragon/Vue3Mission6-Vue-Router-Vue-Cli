(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b24483e4"],{b0c0:function(t,e,a){var s=a("83ab"),c=a("9bf2").f,l=Function.prototype,r=l.toString,n=/^\s*function ([^ (]*)/,o="name";s&&!(o in l)&&c(l,o,{configurable:!0,get:function(){try{return r.call(this).match(n)[1]}catch(t){return""}}})},bcba:function(t,e,a){"use strict";a.r(e);var s=a("7a23"),c={class:"container mt_5p "},l={class:"container"},r=Object(s["g"])("h2",{class:"text-center "},"購物車列表",-1),n={class:"d-flex justify-content-end"},o=Object(s["f"])(" 清空購物車 "),i={class:"table mt-4 row"},d=Object(s["g"])("thead",{class:"co1-12"},[Object(s["g"])("tr",{class:"row"},[Object(s["g"])("th",{class:"col-3 d-none d-md-table-cell"},"產品圖片"),Object(s["g"])("th",{class:"col-2"},"產品名稱"),Object(s["g"])("th",{class:"col-2 ",width:"120"}," 原價 "),Object(s["g"])("th",{class:"col-2 col-md-1"}," 售價 "),Object(s["g"])("th",{class:"col-3 col-md-2"}," 數量 "),Object(s["g"])("th",{class:"col-3 col-md-2"}," 刪除 ")])],-1),u={class:"col-3  d-none d-md-table-cell d-flex align-items-center"},b={class:"col-2 d-flex align-items-center"},m={class:"col-2 d-flex align-items-center"},g={class:"col-2 col-md-1 d-flex align-items-center"},h={class:"col-3 col-md-2  d-flex align-items-center"},f={class:"col-3 col-md-2 d-flex align-items-center"},O=Object(s["g"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-cart-dash",viewBox:"0 0 16 16"},[Object(s["g"])("path",{d:"M6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4z"}),Object(s["g"])("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5\n                  0 0 0 4 12h1a2 2 0 1 0 0 4 2 2\n                  0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0\n                  .491-.408l1.5-8A.5.5 0 0 0 14.5\n                  3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102\n                  4h10.796l-1.313 7h-8.17zM6 14a1 1 0\n                  1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})],-1),j={class:"d-flex justify-content-between align-items-center fw-bold "},p={class:"fs-3 text-decoration-line-through"},v={class:"fs-3 text-danger"},C={class:"d-flex justify-content-end"},x=Object(s["g"])("hr",null,null,-1);function y(t,e,a,y,w,L){var M=Object(s["x"])("Createorder");return Object(s["s"])(),Object(s["d"])(s["a"],null,[Object(s["g"])("div",c,[Object(s["g"])("div",l,[r,Object(s["g"])("div",n,[Object(s["g"])("button",{class:[{"d-none":0==w.cartList.carts},"btn btn-danger "],onClick:e[1]||(e[1]=Object(s["J"])((function(){return L.clearCart&&L.clearCart.apply(L,arguments)}),["prevent"]))},[Object(s["g"])("span",{class:[{"d-none":1!==w.loadingStatue.clearCart},"spinner-border spinner-border-sm"],role:"status","aria-hidden":"true"},null,2),o],2)])]),Object(s["g"])("table",i,[d,Object(s["g"])("tbody",null,[(Object(s["s"])(!0),Object(s["d"])(s["a"],null,Object(s["w"])(w.cartList.carts,(function(t,e){return Object(s["s"])(),Object(s["d"])("tr",{class:"row",key:"delCar_"+e},[Object(s["g"])("td",u,[Object(s["g"])("img",{class:"prd_img ",src:t.product.imageUrl,alt:t.product.title},null,8,["src","alt"])]),Object(s["g"])("td",b,Object(s["A"])(t.product.title),1),Object(s["g"])("td",m,Object(s["A"])(t.origin_price),1),Object(s["g"])("td",g,Object(s["A"])(t.product.price),1),Object(s["g"])("td",h,[Object(s["I"])(Object(s["g"])("input",{class:"carNum",type:"number",min:"1",oninput:"value=value.replace('-', '');if(value>999)value=999","onUpdate:modelValue":function(t){return w.cartList.carts[e].qty=t},onChange:function(e){return L.rediCartItemsNum(t)}},null,40,["onUpdate:modelValue","onChange"]),[[s["E"],w.cartList.carts[e].qty]])]),Object(s["g"])("td",f,[Object(s["g"])("button",{type:"button",class:[{disabled:w.loadingStatue.delCart==t.id},"btn btn-sm btn-danger btn_white "],onClick:function(e){return L.delCartItem(t.id)},"data-action":"remove"},[Object(s["g"])("span",{class:[{"d-none":w.loadingStatue.delCart!==t.id},"spinner-border spinner-border-sm"],role:"status","aria-hidden":"true"},null,2),O],10,["onClick"])])])})),128))])]),Object(s["g"])("ul",j,[Object(s["g"])("li",p,[Object(s["g"])("p",null,"總價:"+Object(s["A"])(w.cartList.total),1)]),Object(s["g"])("li",v,[Object(s["g"])("p",null,"優惠價:"+Object(s["A"])(w.cartList.final_total),1)])]),Object(s["g"])("div",C,[Object(s["g"])("button",{class:[{"d-none":0==w.cartList.carts},"btn btn-success "],onClick:e[2]||(e[2]=Object(s["J"])((function(){return L.sendCartsList&&L.sendCartsList.apply(L,arguments)}),["prevent"]))},[Object(s["g"])("span",{class:[{"d-none":1!==w.loadingStatue.sendCart},"spinner-border spinner-border-sm"],role:"status","aria-hidden":"true"},null,2),Object(s["f"])(" 送出訂單 ( "+Object(s["A"])(w.cartsNum)+" )筆商品 ",1)],2)])]),x,Object(s["g"])(M,{ref:"createOrder",onReGetCartList:L.getCartList},null,8,["onReGetCartList"])],64)}a("99af"),a("b0c0");var w={class:"modal fade",ref:"createOrderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},L={class:"modal-dialog"},M={class:"modal-content"},V=Object(s["g"])("div",{class:"modal-header bg-primary text-white"},[Object(s["g"])("h5",{class:"modal-title css_wordInput_13"},"請輸入討債資訊 ~ ~ (・ω・)"),Object(s["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},A={class:"col-md-6"},D=Object(s["g"])("label",{for:"name",class:"form-label"},"姓名:",-1),S={class:"col-md-6"},$=Object(s["g"])("label",{for:"tel",class:"form-label"},"電話",-1),_={class:"col-md-6"},z=Object(s["g"])("label",{for:"email",class:"form-label"},"Email:",-1),I={class:"col-12"},U=Object(s["g"])("label",{for:"address",class:"form-label"},"地址",-1),q={class:"col-12"},F=Object(s["g"])("label",{for:"text",class:"form-label"},"留言:",-1),N={class:"modal-footer"},E=Object(s["g"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 下個月在解決你們! ",-1);function J(t,e,a,c,l,r){var n=Object(s["x"])("Field"),o=Object(s["x"])("error-message"),i=Object(s["x"])("Form");return Object(s["s"])(),Object(s["d"])("div",w,[Object(s["g"])("div",L,[Object(s["g"])("div",M,[V,Object(s["g"])("div",k,[Object(s["g"])(i,{ref:"creatForm",class:"row g-3"},{default:Object(s["H"])((function(t){var a=t.errors;return[Object(s["g"])("div",A,[D,Object(s["g"])(n,{id:"name",ref:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":a["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:l.userData.user.name,"onUpdate:modelValue":e[1]||(e[1]=function(t){return l.userData.user.name=t})},null,8,["class","modelValue"]),Object(s["g"])(o,{name:"姓名",class:"invalid-feedback"})]),Object(s["g"])("div",S,[$,Object(s["g"])(n,{id:"tel",ref:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":a["電話"]}],placeholder:"請輸入 手機號碼",rules:r.isPhone,modelValue:l.userData.user.tel,"onUpdate:modelValue":e[2]||(e[2]=function(t){return l.userData.user.tel=t})},null,8,["class","rules","modelValue"]),Object(s["g"])(o,{name:"電話",class:"invalid-feedback"})]),Object(s["g"])("div",_,[z,Object(s["g"])(n,{id:"email",ref:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":a["信箱"]}],placeholder:"請輸入 信箱",rules:r.isEmail,modelValue:l.userData.user.email,"onUpdate:modelValue":e[3]||(e[3]=function(t){return l.userData.user.email=t})},null,8,["class","rules","modelValue"]),Object(s["g"])(o,{name:"信箱",class:"invalid-feedback"})]),Object(s["g"])("div",I,[U,Object(s["g"])(n,{id:"address",ref:"address",name:"地址",type:"tel",class:["form-control",{"is-invalid":a["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:l.userData.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return l.userData.user.address=t})},null,8,["class","modelValue"]),Object(s["g"])(o,{name:"地址",class:"invalid-feedback"})]),Object(s["g"])("div",q,[F,Object(s["I"])(Object(s["g"])("textarea",{type:"text",id:"text",placeholder:"請輸入想說的話",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return l.userData.message=t})},null,512),[[s["E"],l.userData.message]])]),Object(s["g"])("div",N,[E,Object(s["g"])("button",{type:"submit",class:"btn btn-primary",onClick:e[6]||(e[6]=Object(s["J"])((function(){return r.closeModal&&r.closeModal.apply(r,arguments)}),["prevent"]))}," 抱歉!錢錢，我真的需要這些酷東西 ")])]})),_:1},512)])])])],512)}var G=a("7c2b"),H=a.n(G),Z={data:function(){return{user:{},Modal:"",userData:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{openModal:function(){this.Modal.show()},closeModal:function(){var t=this;this.Modal.hide();var e={data:this.userData};this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/order"),e).then((function(e){e.data.success?(alert(e.data.message),t.reGetCartList()):alert(e.data.message)})).catch((function(t){console.log(t),alert(t.data.message)}))},reGetCartList:function(){this.$emit("re-get-cart-list")},isPhone:function(t){var e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要輸入正確的手機號碼"},isEmail:function(t){var e=/^([a-zA-Z0-9_.\-+])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return!!e.test(t)||"需要輸入正確的信箱"}},mounted:function(){this.Modal=new H.a(this.$refs.createOrderModal)}};Z.render=J;var P=Z,R={components:{Createorder:P},data:function(){return{cartList:{},cartsNum:0,loadingStatue:{addCart:"",delCart:"",clearCart:"",sendCart:""}}},methods:{getCartList:function(){var t=this;this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/cart")).then((function(e){e.data.success?t.cartList=e.data.data:alert(e.data.message)})).catch((function(t){alert(t.data.message)}))},delCartItem:function(t){var e=this;this.loadingStatue.delCart=t,this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/cart/").concat(t)).then((function(t){console.log(t),t.data.success?(e.getCartList(),e.loadingStatue.delCart="",alert(t.data.message)):alert(t.data.message)})).catch((function(t){alert(t.data.message)}))},clearCart:function(){var t=this;this.loadingStatue.clearCart=1,this.$http.delete("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/carts")).then((function(e){e.data.success?(t.getCartList(),alert(e.data.message),t.loadingStatue.clearCart=""):alert(e.data.message)})).catch((function(t){alert(t.data.message)}))},rediCartItemsNum:function(t){var e=this,a={data:{product_id:t.product_id,qty:parseInt(t.qty,10)}};this.$http.put("".concat("https://vue3-course-api.hexschool.io","/api/").concat("sim322on","/cart/").concat(t.id),a).then((function(t){t.data.success?e.getCartList():alert(t.data.message)})).catch((function(t){alert(t.data.message)}))},sendCartsList:function(){var t=this;this.loadingStatue.sendCart=1,setTimeout((function(){t.loadingStatue.sendCart=""}),1e3),this.$refs.createOrder.$refs.creatForm.resetForm(),this.$refs.createOrder.openModal()}},watch:{cartList:function(){this.cartsNum=this.cartList.carts.length}},mounted:function(){this.getCartList()}};R.render=y;e["default"]=R}}]);
//# sourceMappingURL=chunk-b24483e4.18dd2c83.js.map